/* =========================================================
   ORSV2 – Global Styles (cleaned + unified)
   - Brand tokens + shadows
   - Gradient buttons as default (login-button look)
   - Header, cards, tables, students page specifics
   ========================================================= */

/* ===== Base ===== */
html {
  font-size: 14px;
  position: relative;
  min-height: 100%;
}
@media (min-width: 768px) {
  html { font-size: 16px; }
}

body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  font-size: 12pt;
  font-weight: 400;
}

.btn:focus,
.btn:active:focus,
.btn-link.nav-link:focus,
.form-control:focus,
.form-check-input:focus {
  box-shadow: 0 0 0 0.1rem #fff, 0 0 0 0.25rem #258cfb;
}

.form-floating > .form-control-plaintext::placeholder,
.form-floating > .form-control::placeholder { color: var(--bs-secondary-color); text-align: end; }
.form-floating > .form-control-plaintext:focus::placeholder,
.form-floating > .form-control:focus::placeholder { text-align: start; }

a { color: #0077cc; }
a.navbar-brand { white-space: normal; text-align: center; word-break: break-all; }

.breadcrumb a { color: #0022C5; text-decoration: none; }
.breadcrumb a:hover { text-decoration: underline; }

.border-top { border-top: 1px solid #e5e5e5; }
.border-bottom { border-bottom: 1px solid #e5e5e5; }
.box-shadow { box-shadow: 0 .25rem .75rem rgba(0,0,0,.05); }
button.accept-policy { font-size: 1rem; line-height: inherit; }
.footer { white-space: nowrap; }

.hover-shadow:hover { box-shadow: 0 .5rem 1rem rgba(0,0,0,.15) !important; transition: box-shadow .3s ease-in-out; }

.ga-section { opacity: 0; transform: translateY(40px); transition: opacity .4s ease, transform .4s ease; }
.ga-section.visible { opacity: 1; transform: translateY(0); }
.d-none { display: none !important; }

/* ===== CSS Vars (unified) ===== */
:root{
  /* Brand colors */
  --orenda-primary:#0022C5;
  --orenda-primary-hover:#001aa0;
  --orenda-primary-light:#1a4fb8;
  --orenda-secondary:#f8f9fb;
  --orenda-border:#e9ecef;
  --orenda-text-white:#fff;

  /* Shadows */
  --orenda-shadow:rgba(0,34,197,.15);
  --orenda-shadow-hover:rgba(0,34,197,.25);
  --orenda-shadow-lg:0 1rem 3rem rgba(0,0,0,.175);

  /* Gradient tokens (login look) */
  --orenda-grad-start:#0022C5;
  --orenda-grad-end:#1a4fb8;
  --orenda-grad-hover-start:#001aa0;
  --orenda-grad-hover-end:#1640a0;

  /* Button tokens */
  --btn-radius:.5rem;
  --btn-pad-y:.5rem;
  --btn-pad-x:1rem;
  --btn-font:.95rem;
  --btn-shadow:0 4px 12px var(--orenda-shadow);
  --btn-shadow-hover:0 8px 20px var(--orenda-shadow-hover);
  --btn-ring:0 0 0 .2rem rgba(0,34,197,.15);
}

/* =========================================================
   Buttons – DEFAULT = Gradient (matches login page)
   ========================================================= */

/* Base (shared) */
.btn,
.btn-orenda {
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.5rem;
  border:none;
  border-radius: var(--btn-radius);
  padding: var(--btn-pad-y) var(--btn-pad-x);
  font-weight: 600;
  font-size: var(--btn-font);
  line-height: 1.2;
  transition: transform .15s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
  box-shadow: var(--btn-shadow);
  text-decoration:none;
  cursor:pointer;
  will-change: transform, box-shadow;
  position:relative; /* for shimmer/spinner */
  overflow:hidden;   /* for shimmer */
  color:#fff;
}

/* Primary defaults -> Gradient (btn, btn-orenda, btn-primary) */
.btn,
.btn-orenda,
.btn-primary,
.btn-orenda-primary {
  background: linear-gradient(135deg, var(--orenda-grad-start) 0%, var(--orenda-grad-end) 100%);
  color:#fff;
}
.btn:hover,
.btn-orenda:hover,
.btn-primary:hover,
.btn-orenda-primary:hover {
  background: linear-gradient(135deg, var(--orenda-grad-hover-start) 0%, var(--orenda-grad-hover-end) 100%);
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0,34,197,.30);
}
.btn:active,
.btn-orenda:active,
.btn-primary:active,
.btn-orenda-primary:active {
  transform: translateY(0);
  box-shadow: 0 3px 10px rgba(0,34,197,.25);
}

/* Optional shimmer (add .btn-shimmer) */
.btn.btn-shimmer::before,
.btn-orenda.btn-shimmer::before {
  content:'';
  position:absolute;
  top:0; left:-100%;
  width:100%; height:100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
  transition:left .5s ease;
}
.btn.btn-shimmer:hover::before,
.btn-orenda.btn-shimmer:hover::before { left:100%; }

/* Outline variant */
.btn-outline-primary,
.btn-orenda-outline {
  background: transparent;
  color: var(--orenda-primary);
  border: 2px solid var(--orenda-primary);
  box-shadow: none;
}
.btn-outline-primary:hover,
.btn-orenda-outline:hover {
  background: linear-gradient(135deg, var(--orenda-grad-start) 0%, var(--orenda-grad-end) 100%);
  color: #fff;
  box-shadow: var(--btn-shadow-hover);
}

/* Soft (subtle filled) */
.btn-orenda-soft {
  background: rgba(0,34,197,.08);
  color: var(--orenda-primary);
  box-shadow: none;
}
.btn-orenda-soft:hover {
  background: rgba(0,34,197,.14);
  box-shadow: var(--btn-shadow);
}

/* Ghost (text-like) */
.btn-orenda-ghost {
  background: transparent;
  color: var(--orenda-primary);
  box-shadow: none;
}
.btn-orenda-ghost:hover {
  background: rgba(0,34,197,.1);
}

/* Success / Danger */
.btn-orenda-success { background:#16a34a; color:#fff; }
.btn-orenda-success:hover { background:#128a3f; box-shadow: var(--btn-shadow-hover); transform: translateY(-1px); }
.btn-orenda-danger { background:#dc3545; color:#fff; }
.btn-orenda-danger:hover { background:#c12d3a; box-shadow: var(--btn-shadow-hover); transform: translateY(-1px); }

/* Sizes */
.btn-xs { padding:.25rem .5rem; font-size:.78rem; border-radius:.375rem; }
.btn-sm { padding:.35rem .75rem; font-size:.85rem; border-radius:.45rem; }
.btn-lg { padding:.75rem 1.25rem; font-size:1.05rem; border-radius:.65rem; }

/* Full-width */
.btn-block { width:100%; }

/* Icon-only */
.btn-icon { padding:.5rem; width:2.25rem; height:2.25rem; border-radius:.5rem; }

/* Busy/Disabled */
.btn:disabled,
.btn[aria-disabled="true"],
.btn.btn-busy,
.btn-orenda:disabled,
.btn-orenda[aria-disabled="true"],
.btn-orenda.btn-busy,
.btn-orenda-outline:disabled,
.btn-orenda-outline[aria-disabled="true"],
.btn-orenda-outline.btn-busy {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
  filter: grayscale(1);
  box-shadow:none;
}

/* Loading spinner (aria-busy) */
.btn[aria-busy="true"],
.btn-orenda[aria-busy="true"] { color:transparent !important; }
.btn[aria-busy="true"]::after,
.btn-orenda[aria-busy="true"]::after{
  content:'';
  position:absolute;
  width:16px; height:16px;
  top:50%; left:50%;
  margin:-8px 0 0 -8px;
  border-radius:50%;
  border:2px solid rgba(255,255,255,.85);
  border-right-color:transparent;
  animation: btnspin 1s linear infinite;
}
@keyframes btnspin{ to{ transform: rotate(360deg); } }

/* Focus ring (accessible) */
.btn:focus-visible,
.btn-orenda:focus-visible,
.btn-orenda-outline:focus-visible,
.btn-orenda-soft:focus-visible,
.btn-orenda-ghost:focus-visible {
  outline: none;
  box-shadow: var(--btn-ring), var(--btn-shadow);
}

/* Force button text to stay white for primary/gradient buttons */
.btn,
.btn-orenda,
.btn-primary,
.btn-orenda-primary {
  color: #fff !important;
}

.btn:hover,
.btn-orenda:hover,
.btn-primary:hover,
.btn-orenda-primary:hover,
.btn:active,
.btn-orenda:active,
.btn-primary:active,
.btn-orenda-primary:active {
  color: #fff !important;
}

/* =========================================================
   Compact Action Set Buttons (Edit / Save / Cancel)
   ========================================================= */
.btn-action {
  font-weight: 500;
  letter-spacing: .3px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .25rem;
  border-radius: .45rem;
  padding: .3rem .65rem;
  font-size: .8rem;
  line-height: 1.1;
  transition: all .2s ease;
  min-width: 68px; /* keeps widths consistent */
  white-space: nowrap;
}

/* icons scale down slightly for compact look */
.btn-action i {
  font-size: .85rem;
}

/* Edit = neutral/soft */
.btn-action-edit {
  background: rgba(0,34,197,.08);
  color: var(--orenda-primary);
  border: 1px solid var(--orenda-border);
}
.btn-action-edit:hover {
  background: rgba(0,34,197,.14);
  transform: translateY(-1px);
  box-shadow: 0 2px 6px var(--orenda-shadow);
}

/* Save = primary gradient */
.btn-action-save {
  background: linear-gradient(135deg, var(--orenda-grad-start), var(--orenda-grad-end));
  color: #fff !important;
  border: none;
}
.btn-action-save:hover {
  background: linear-gradient(135deg, var(--orenda-grad-hover-start), var(--orenda-grad-hover-end));
  transform: translateY(-1px);
  box-shadow: 0 2px 6px rgba(0,34,197,.3);
}

/* Cancel = outline */
.btn-action-cancel {
  background: transparent;
  color: var(--orenda-primary);
  border: 1px solid var(--orenda-primary);
}
.btn-action-cancel:hover {
  background: var(--orenda-primary);
  color: #fff !important;
  transform: translateY(-1px);
  box-shadow: 0 2px 6px rgba(0,34,197,.3);
}
/* Cancel = outline */
.btn-action-delete {
  background: transparent;
  color: var(--orenda-primary);
  border: 1px solid var(--orenda-primary);
}
.btn-action-delete:hover {
  background: var(--orenda-primary);
  color: #fff !important;
  transform: translateY(-1px);
  box-shadow: 0 2px 6px rgba(0,34,197,.3);
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  .btn, .btn-orenda { transition: none; }
}

/* Buttons designed for dark/gradient backgrounds */
.btn-inverse {
  background: transparent;
  color: #fff !important;
  border: 1.5px solid rgba(255,255,255,.9);
  box-shadow: none;
}
.btn-inverse:hover {
  background: rgba(255,255,255,.12);
  transform: translateY(-1px);
  box-shadow: 0 3px 10px rgba(0,0,0,.25);
}

/* Solid white on dark header (alt option) */
.btn-inverse-solid {
  background:#fff;
  color: var(--orenda-primary) !important;
  border: none;
  box-shadow: 0 4px 12px rgba(0,0,0,.15);
}
.btn-inverse-solid:hover {
  background:#f2f5ff;
  transform: translateY(-1px);
  box-shadow: 0 8px 20px rgba(0,0,0,.2);
}


/* =========================================================
   Header / Nav
   ========================================================= */
.main-header{
  background:linear-gradient(135deg,var(--orenda-primary) 0%,var(--orenda-primary-hover) 100%);
  box-shadow:var(--orenda-shadow-lg);
  border-bottom:3px solid rgba(255,255,255,.1);
  padding:0;
  min-height:60px;
}
.main-header .navbar{ padding:0; min-height:60px; }
.main-header .container-fluid{ padding:.375rem 1rem; align-items:center; min-height:60px; }

.brand-logo{ height:32px; transition:transform .3s ease; }
.brand-logo:hover{ transform:scale(1.05); }
.main-header .navbar-brand{ padding:0; margin:0; line-height:1; }

.nav-main{ gap:0; margin:0; }
.nav-main .nav-link,
.nav-main .dropdown-toggle{
  color:var(--orenda-text-white)!important;
  font-weight:500;
  padding:.375rem .625rem;
  border-radius:.25rem;
  transition:all .3s ease;
  text-decoration:none;
  position:relative;
  overflow:hidden;
  font-size:.9rem;
  line-height:1.2;
  margin:0 .125rem;
  border:none;
  background:transparent;
}
.nav-main .nav-link:hover,
.nav-main .dropdown-toggle:hover{ background:rgba(255,255,255,.15); transform:translateY(-1px); }
.nav-main .dropdown-menu{
  background:#fff; border:none; box-shadow:0 .5rem 1rem rgba(0,0,0,.15);
  border-radius:.375rem; padding:.5rem 0; margin-top:.25rem;
}
.nav-main .dropdown-item{ padding:.5rem 1rem; font-size:.875rem; color:#495057; transition:all .2s ease; }
.nav-main .dropdown-item:hover{ background:var(--orenda-primary); color:#fff; }
.nav-main .dropdown-item i{ width:1.25rem; }
.nav-main .nav-link::before{
  content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
  background:rgba(255,255,255,.1); transition:left .3s ease;
}
.nav-main .nav-link:hover::before{ left:0; }
.nav-main .nav-link:hover{ transform:translateY(-2px); }

.user-profile{
  background:rgba(255,255,255,.1);
  border:1px solid rgba(255,255,255,.2);
  border-radius:.25rem; padding:.25rem .5rem; backdrop-filter:blur(10px); margin:0;
}
.user-profile .dropdown-toggle{
  border:none; background:transparent; color:var(--orenda-text-white);
  font-weight:500; font-size:.875rem; padding:.25rem; line-height:1;
}
.user-profile .dropdown-toggle:focus{ box-shadow:0 0 0 .25rem rgba(255,255,255,.25); }

.navbar-toggler{
  border:1px solid rgba(255,255,255,.3);
  border-radius:.25rem; padding:.125rem .25rem; font-size:.75rem; margin:0;
}
.navbar-toggler:focus{ box-shadow:0 0 0 .25rem rgba(255,255,255,.25); }
.navbar-toggler-icon{
  background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255,255,255,.85%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='m4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
}
.navbar-collapse{
  background:var(--orenda-primary); border-radius:.5rem; margin-top:1rem;
  box-shadow:0 .25rem .75rem rgba(0,0,0,.05);
}
@media (max-width: 991.98px){
  .navbar-collapse{ padding:.75rem; margin-top:.375rem; }
  .nav-main{ flex-direction:column; gap:.125rem; }
  .nav-main .nav-link{ padding:.5rem; text-align:left; border-radius:.25rem; font-size:.9rem; }
  .user-profile{ margin-top:.75rem; padding:.5rem; text-align:center; }
}
@media (max-width:575.98px){
  .container-fluid{ padding-left:.75rem; padding-right:.75rem; }
  .brand-logo{ height:28px; }
  .nav-main .nav-link, .nav-main .dropdown-toggle{ font-size:.85rem; padding:.375rem .5rem; }
  .main-header, .main-header .navbar, .main-header .container-fluid{ min-height:55px; }
}

/* Dropdown (global) */
.dropdown-menu{ border:none; box-shadow:var(--orenda-shadow-lg); border-radius:.5rem; overflow:hidden; }
.dropdown-item{ padding:.75rem 1.25rem; font-weight:500; transition:all .2s ease; }
.dropdown-item:hover{ background:var(--orenda-primary); color:var(--orenda-text-white); }

/* =========================================================
   Containers / Cards
   ========================================================= */
.orenda-container{ max-width:1200px; margin:0 auto; }
.orenda-container-sm{ max-width:900px; margin:0 auto; }

.orenda-header{
  background:linear-gradient(135deg,var(--orenda-primary) 0%,var(--orenda-primary-light) 100%);
  color:#fff; padding:2rem; border-radius:12px; margin-bottom:2rem; box-shadow:0 4px 20px var(--orenda-shadow);
}
.orenda-header h2{ margin-bottom:.5rem; font-weight:600; }
.orenda-header p{ margin-bottom:0; opacity:.9; }

.orenda-card,
.orenda-table-wrapper,
.protocols-table-wrapper{
  background:#fff; border-radius:12px; overflow:hidden;
  box-shadow:0 2px 12px rgba(0,0,0,.08);
  border:1px solid var(--orenda-border);
}
.orenda-card-body{ padding:2rem; }

/* =========================================================
   Tables
   ========================================================= */
.orenda-table,
.protocols-table { margin-bottom:0; font-size:.95rem; }
.orenda-table th,
.protocols-table th {
  background:linear-gradient(135deg,var(--orenda-secondary) 0%,var(--orenda-border) 100%);
  color:#495057; font-weight:600; padding:1rem .75rem; border:none;
  text-transform:uppercase; font-size:.8rem; letter-spacing:.5px; white-space:nowrap;
}
.orenda-table td,
.protocols-table td { padding:1rem .75rem; border:none; border-bottom:1px solid #f1f3f4; vertical-align:middle; }
.orenda-table tbody tr,
.protocols-table tbody tr { transition:all .2s ease; }
.orenda-table tbody tr:hover,
.protocols-table tbody tr:hover { background:#f8f9ff; transform:translateY(-1px); box-shadow:0 2px 8px rgba(0,34,197,.1); }
.orenda-table tbody tr:last-child td,
.protocols-table tbody tr:last-child td { border-bottom:none; }

/* Badges */
.school-badge{
  background:linear-gradient(135deg,var(--orenda-primary) 0%,var(--orenda-primary-light) 100%);
  color:#fff; padding:.4rem .8rem; border-radius:20px; font-size:.85rem; font-weight:500; display:inline-block;
  max-width:100%; white-space:normal; word-wrap:break-word;
}
.checkpoint-badge{
  background:linear-gradient(135deg,#28a745 0%,#20c997 100%);
  color:#fff; padding:.3rem .7rem; border-radius:15px; font-size:.75rem; font-weight:500;
  white-space: nowrap;
}

/* Responsive tweaks */
@media (max-width:768px){
  .orenda-header{ padding:1.5rem; }
  .orenda-card-body{ padding:1.5rem; }
  .orenda-summary-item{ flex-direction:column; align-items:flex-start; }
  .orenda-summary-label{ min-width:auto; margin-bottom:.25rem; }
  .orenda-container, .orenda-container-sm{ margin:0 1rem; max-width:none; }
  .protocols-header{ padding:1.5rem; }
  .protocols-table th, .protocols-table td{ padding:.75rem .5rem; }
}

/* Utilities */
.text-orenda-primary{ color:var(--orenda-primary) !important; }
.bg-orenda-primary{ background:var(--orenda-primary) !important; }
.border-orenda-primary{ border-color:var(--orenda-primary) !important; }
.shadow-orenda{ box-shadow:0 4px 20px var(--orenda-shadow) !important; }
.shadow-orenda-hover:hover{ box-shadow:0 4px 20px var(--orenda-shadow-hover) !important; transition:box-shadow .3s ease; }
.smooth-transition{ transition:all .3s ease; }
@media (max-width:991.98px){
  .navbar-collapse.collapsing{ transition:height .35s ease; }
}

/* =========================================================
   Students page specific
   ========================================================= */

/* Smaller table header text + tighter padding */
#studentsTable thead th{
  font-size:.72rem;
  padding:.5rem .5rem;
}

/* Sticky header */
#studentsTable > thead th{
  position:sticky; top:0; z-index:10; background:#f8f9fa;
  box-shadow: inset 0 -2px 0 #dee2e6;
}

/* Keep drag helper above everything while dragging */
.ui-draggable-dragging{
  z-index:200000 !important;
  pointer-events:none;
}

/* Avoid stacking-context issues that can hide the helper */
.table-scroll-container,
.card,
#groupingArea,
#studentsToolbar{
  transform:none !important;
  will-change:auto !important;
}

/* Grouping area baseline */
#groupingArea{ position:relative; z-index:1; }

/* Sticky toolbar above table scroll area */
.students-toolbar{
  position:sticky; top:0; z-index:1025; background:#fff;
  padding:.5rem .75rem; border:1px solid var(--orenda-border);
  border-radius:8px; margin-bottom:.5rem;
  display:flex; gap:.5rem; align-items:center; justify-content:space-between;
}
.students-toolbar .left,
.students-toolbar .right{ display:flex; gap:.5rem; align-items:center; }
.students-toolbar input.form-control{ height:32px; padding:.25rem .5rem; font-size:.9rem; }

/* Small button tweak (kept for toolbar harmony) */
.btn-orenda.btn-sm,
.btn-orenda-outline.btn-sm {
  padding: .25rem .5rem;
  font-size: .8rem;
  border-radius: .25rem;
}

/* Collapsible district header */
.district-header-toggle{
  background:#fff;
  border:1px solid var(--orenda-border);
  border-radius:12px;
  padding:.75rem 1rem;
  box-shadow:0 2px 12px rgba(0,0,0,.06);
  cursor:pointer;
  transition:box-shadow .2s ease, transform .15s ease, background .2s ease;
  text-align:left;
}
.district-header-toggle:hover{
  background:#f8f9ff;
  box-shadow:0 4px 16px rgba(0,34,197,.12);
  transform:translateY(-1px);
}
.district-header-toggle .chevron{
  display:inline-block;
  transition:transform .2s ease;
}
.district-header-toggle[aria-expanded="false"] .chevron{
  transform:rotate(-90deg);
}

/* Collapse body animation */
.collapse-body{
  transition:max-height .25s ease, opacity .2s ease, margin-top .2s ease;
  overflow:hidden;
}
.collapse-body.is-collapsed{
  max-height:0 !important;
  opacity:0;
  margin-top:0 !important;
}

/* Compact badge variant */
.badge-compact {
  font-weight: 600;
  padding: .2rem .5rem;
  font-size: .75rem;
  border-radius: .375rem;
  line-height: 1.1;
}

/* Modal polish */
.modal-content.shadow-orenda { border-radius: 12px; }
.modal-header.bg-orenda-primary { border-bottom: none; }
.modal-footer { border-top: none; }

.check-mini { transform: scale(0.85); pointer-events: none; }

/* Targets Page */
.quadrant-col {
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
}

/** Index status **/
.status-row { display:flex; align-items:center; gap:.5rem; }
.status-icon { width:16px; height:16px; display:inline-flex; align-items:center; justify-content:center; }
.status-true { color:#198754; } /* green */
.status-false { color:#dc3545; } /* red */
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

/* ===== Unified Link Style ===== */
.orenda-link {
  color: var(--orenda-primary);
  font-weight: 600; /* Bolder for emphasis and clarity */
  text-decoration: none;
  display: inline-block; /* Ensures transform and padding work correctly */
  padding-bottom: 2px; /* Adds a little space for the border to breathe */
  border-bottom: 1.5px solid transparent; /* Slightly thicker for visibility */
  transition: color 0.2s ease,
              transform 0.2s ease,
              border-color 0.2s ease;
}

.orenda-link:hover {
  color: var(--orenda-primary-hover);
  transform: translateY(-1px); /* Subtle lift effect, matches your buttons */
  border-bottom-color: var(--orenda-primary-hover); /* Reveals border on hover */
}