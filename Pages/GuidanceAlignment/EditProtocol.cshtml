@page "EditProtocol/{id:int}"
@model ORSV2.Pages.GuidanceAlignment.EditProtocolModel
@{
    ViewData["Title"] = "Edit GA Protocol";
}

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar Navigation -->
        <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar position-sticky" style="top: 0; height: 100vh; overflow-y: auto;">
            <div class="pt-3">
                <ul class="nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#introduction">1. Introduction</a></li>
                    <li class="nav-item"><a class="nav-link" href="#targets">2. Targets</a></li>
                    <li class="nav-item"><a class="nav-link" href="#above">3. Above the Line</a></li>
                    <li class="nav-item"><a class="nav-link" href="#demographics">4. Demographics</a></li>
                    <li class="nav-item"><a class="nav-link" href="#indicators">5. Indicators</a></li>
                    <li class="nav-item"><a class="nav-link" href="#trends">6. Trends</a></li>
                    <li class="nav-item"><a class="nav-link" href="#agreements">7. Common Agreements</a></li>
                    <li class="nav-item"><a class="nav-link" href="#action">8. Action Plan</a></li>
                    <li class="nav-item"><a class="nav-link" href="#wrapup">9. Wrap Up</a></li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
            <h1 class="mt-3">Edit GA Protocol</h1>

            <form method="post">

                @for (int i = 1; i <= 9; i++)
                {
                    var sectionId = i switch
                    {
                        1 => "introduction",
                        2 => "targets",
                        3 => "above",
                        4 => "demographics",
                        5 => "indicators",
                        6 => "trends",
                        7 => "agreements",
                        8 => "action",
                        9 => "wrapup",
                        _ => $"section{i}"
                    };

                    <section id="@sectionId" class="my-5">
                        <h3>@i. @Model.SectionTitles[i]</h3>
                        <textarea class="form-control" rows="6" asp-for="Responses[@i]" placeholder="Enter response..."></textarea>
                    </section>
                }

                <div class="text-end mb-5">
                    <button type="submit" class="btn btn-success">Save Protocol</button>
                </div>
            </form>

        </main>
    </div>
</div>

@section Scripts {
    <script>
        // Smooth scrolling for sidebar links
        document.querySelectorAll('a.nav-link').forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    </script>
}
